<!DOCTYPE html>
<html lang="ru" class="light">
  <head>
    <meta charset="utf-8" />
    <title>Холодос - мой список продуктов</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no, viewport-fit=cover"
    />
    <meta
      content="Холодос – это бот-приложение, делающее процесс похода в магазин проще, быстрее, и что самое главное, эффективнее."
      name="description"
    />
    <meta name="format-detection" content="telephone=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="MobileOptimized" content="176" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="robots" content="noindex, nofollow" />
    <link href="./favicon.ico" rel="icon" />
    <script src="https://tg.dev/js/telegram-web-app.js"></script>
    <script>
      function setThemeClass() {
        document.documentElement.className = Telegram.WebApp.colorScheme;
      }
      Telegram.WebApp.onEvent('themeChanged', setThemeClass);
      setThemeClass();
    </script>
    <link href="css/holodos.css" rel="stylesheet" />
  </head>

  <body id="app" class="holodos-bg-img">
    <button style="width: 100%; top: 0px" @click="order = true">
      MAIN BUTTON
    </button>
    <main :class="order ? 'order-mode' : ''">
      <section
        class="holodos-page holodos-items"
        v-for="tab in tabs"
        :key="tab.title"
      >
        <div
          class="holodos-item"
          :class="item.counter === 0 ? '' : 'selected'"
          v-for="(item, index) in tab.items"
          :key="`${tab.title}-${index}`"
        >
          <div
            class="holodos-item-counter"
            :style="item.counter === 0 ? '' : 'animation-name: badge-incr'"
          >
            {{ item.counter }}
          </div>
          <div class="holodos-item-photo">
            <picture class="holodos-item-lottie">
              <img :src="`img/products/${item.img}.png`" :alt="item.title" />
            </picture>
          </div>
          <div class="holodos-item-label">
            <span class="holodos-item-title">Title</span>
            <span class="holodos-item-price">₴{{ item.price }}</span>
          </div>
          <div class="holodos-item-buttons">
            <button
              class="holodos-item-decr-button decr-btn button-item ripple-handler"
              @click="delCounter(item)"
            >
              <span class="ripple-mask"><span class="ripple"></span></span>
            </button>
            <button
              class="holodos-item-incr-button button-item ripple-handler"
              @click="addCounter(item)"
            >
              <span class="button-item-label"> Add </span>
              <span class="ripple-mask">
                <span
                  class="ripple"
                  :style="item.counter === 0 ? '' : 'transform: translate3d(4.34375px, -4px, 0px) scale3d(1, 1, 1); opacity: 0; transition-duration: var(--ripple-end-duration, 0.2s);'"
                >
                </span>
              </span>
            </button>
          </div>
        </div>
      </section>

      <section
        class="holodos-page holodos-order-overview"
        :style="order ? 'display: block' : ''"
      >
        <div class="holodos-block" style="margin-bottom: 14px">
          <div class="holodos-order-header-wrap">
            <img
              src="img/bg-order.png"
              alt=""
              style="width: 60px; margin-right: 20px"
            />
            <div class="holodos-order-item-label">
              <div class="holodos-order-item-title" style="font-size: 14px">
                СПИСОК #3947653875
              </div>
              <div
                class="holodos-order-item-description"
                style="color: var(--text-color)"
              >
                Идеальный список для покупок
              </div>
              <div class="holodos-order-item-description">@MyHolodosBot</div>
            </div>
          </div>
          <div class="holodos-order-items"></div>
        </div>

        <div class="holodos-block">
          <div class="holodos-order-header-wrap">
            <h2 class="holodos-order-header">Ваш список</h2>
            <button
              type="button"
              class="holodos-order-edit"
              @click="order = false"
              style="cursor: pointer; color: #fff"
            >
              ...
            </button>
          </div>

          <div class="holodos-order-items">
            <div v-for="tab in tabs" :key="`order-${tab.title}`">
              <div
                class="holodos-order-item"
                :class="item.counter === 0 ? '' : 'selected'"
                v-for="(item, index) in tab.items"
                :key="`order-${tab.title}-${index}`"
              >
                <div class="holodos-order-item-photo">
                  <picture class="holodos-item-lottie">
                    <img
                      :src="`img/products/${item.img}.png`"
                      :alt="item.title"
                    />
                  </picture>
                </div>
                <div class="holodos-order-item-label">
                  <div class="holodos-order-item-title">
                    {{ item.title }}
                    <span class="holodos-order-item-counter">
                      {{ item.counter }}x
                    </span>
                  </div>
                  <div class="holodos-order-item-description">
                    {{ tab.title }}
                  </div>
                </div>
                <div class="holodos-order-item-price">₴{{ item.price }}</div>
              </div>
            </div>
          </div>

          <div class="holodos-order-item selected">
            <div class="holodos-order-item-photo"></div>
            <div class="holodos-order-item-label">
              <div class="holodos-order-item-title">Всего:</div>
            </div>
            <div class="holodos-order-item-price">₴{{ totalPrice }}</div>
          </div>
        </div>

        <div class="holodos-text-field-wrap">
          <textarea
            class="holodos-text-field holodos-block"
            rows="1"
            :value="comment"
            placeholder="Добавить комментарий…"
            style="overflow: hidden visible; overflow-wrap: break-word"
          ></textarea>
          <div class="holodos-text-field-hint">
            Любые особые пожелания, детали т.д.
          </div>
        </div>
      </section>
    </main>

    <script src="https://unpkg.com/vue@3"></script>
    <script src="js/holodos.js"></script>
  </body>
</html>
